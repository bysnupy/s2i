#!/bin/bash

LOCAL_SOURCE_DIR=/tmp/src

# Resulting WAR files will be deployed to /opt/eap/standalone/deployments
DEPLOY_DIR=$JBOSS_HOME/standalone/deployments

# JBoss AS data dir. Can be overridden.
DATA_DIR=${DATA_DIR:-$JBOSS_HOME/standalone/data}

# the subdirectory within LOCAL_SOURCE_DIR from where we should copy build
# artifacts (*.war, *.jar)
ARTIFACT_DIR=${ARTIFACT_DIR:-target}


echo "--- COPY ARTIFACT FROM REMOTE REPO ---"
curl -s https://tomcat.apache.org/tomcat-7.0-doc/appdev/sample/sample.war -o /deployments
echo "--- COPY CONF FROM GIT REPO ---"
test -d $LOCAL_SOURCE_DIR/configuration && cp -v $LOCAL_SOURCE_DIR/configuration/* $JBOSS_HOME/standalone/configuration/
echo "--- COPY MOD  FROM GIT REPO ---"
test -d $LOCAL_SOURCE_DIR/modules       && cp -vr $LOCAL_SOURCE_DIR/modules/* $JBOSS_HOME/modules/


chmod -R g+rwX $HOME

exit 0
